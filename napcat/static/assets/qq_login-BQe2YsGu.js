import{j as d,s as we,i as ee,b as U,c as Ce,a as Me}from"./index-CccuTvbI.js";import{t as Ne,a as X}from"./chunk-ML27DD5T-YcpzojV6.js";import{R as y,u as ve,r as I}from"./react-router-dom-BuK5Vxqh.js";import{c as j}from"./react-hot-toast-LXUdLeap.js";import{P as Re,H as ye,T as xe}from"./pure-HoY1Ompg.js";import{t as K}from"./primitives-D092zWiZ.js";import{a as Z}from"./chunk-SXMLSBOY-CQ3-m1Kj.js";import{s as Ae}from"./chunk-KVDW62ZT-DxEdsCLi.js";import{l as be}from"./chunk-O4OUNAUT-DXD-aBc7.js";import{a as Pe,Q as _}from"./qq_manager-D3q1K29X.js";import{l as Ie}from"./logo-juTWEVZj.js";import"./react-dom-DoC2WAmd.js";import"./monaco-editor-D-sLb42b.js";import"./react-icons-FgIH09Ic.js";import"./index-CokAva9Y.js";import"./openLink-DRU7_5Wb.js";import"./useListState-YM5D1-iN.js";import"./usePress-3YWMO_Ik.js";import"./SelectionManager-FvVuIllO.js";import"./features-animation-CVX41PUG.js";import"./chunk-EN4B57RQ-D-bHVvCd.js";import"./useToggle-Bk5XweXv.js";import"./chunk-OPTZHMJX-DnVTyuWi.js";import"./chunk-SLABUSGS-BMvBJEIh.js";var Se=Object.defineProperty,T=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,J=(c,a,o)=>a in c?Se(c,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[a]=o,B=(c,a)=>{for(var o in a||(a={}))te.call(a,o)&&J(c,o,a[o]);if(T)for(var o of T(a))se.call(a,o)&&J(c,o,a[o]);return c},$=(c,a)=>{var o={};for(var u in c)te.call(c,u)&&a.indexOf(u)<0&&(o[u]=c[u]);if(c!=null&&T)for(var u of T(c))a.indexOf(u)<0&&se.call(c,u)&&(o[u]=c[u]);return o};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var S;(c=>{const a=class w{constructor(e,s,t,r){if(this.version=e,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],e<w.MIN_VERSION||e>w.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let n=[];for(let i=0;i<this.size;i++)n.push(!1);for(let i=0;i<this.size;i++)this.modules.push(n.slice()),this.isFunction.push(n.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(t);if(this.drawCodewords(h),r==-1){let i=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const l=this.getPenaltyScore();l<i&&(r=E,i=l),this.applyMask(E)}}m(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,s){const t=c.QrSegment.makeSegments(e);return w.encodeSegments(t,s)}static encodeBinary(e,s){const t=c.QrSegment.makeBytes(e);return w.encodeSegments([t],s)}static encodeSegments(e,s,t=1,r=40,n=-1,h=!0){if(!(w.MIN_VERSION<=t&&t<=r&&r<=w.MAX_VERSION)||n<-1||n>7)throw new RangeError("Invalid value");let i,E;for(i=t;;i++){const g=w.getNumDataCodewords(i,s)*8,R=N.getTotalBits(e,i);if(R<=g){E=R;break}if(i>=r)throw new RangeError("Data too long")}for(const g of[w.Ecc.MEDIUM,w.Ecc.QUARTILE,w.Ecc.HIGH])h&&E<=w.getNumDataCodewords(i,g)*8&&(s=g);let l=[];for(const g of e){o(g.mode.modeBits,4,l),o(g.numChars,g.mode.numCharCountBits(i),l);for(const R of g.getData())l.push(R)}m(l.length==E);const v=w.getNumDataCodewords(i,s)*8;m(l.length<=v),o(0,Math.min(4,v-l.length),l),o(0,(8-l.length%8)%8,l),m(l.length%8==0);for(let g=236;l.length<v;g^=253)o(g,8,l);let C=[];for(;C.length*8<l.length;)C.push(0);return l.forEach((g,R)=>C[R>>>3]|=g<<7-(R&7)),new w(i,s,C,n)}getModule(e,s){return 0<=e&&e<this.size&&0<=s&&s<this.size&&this.modules[s][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),s=e.length;for(let t=0;t<s;t++)for(let r=0;r<s;r++)t==0&&r==0||t==0&&r==s-1||t==s-1&&r==0||this.drawAlignmentPattern(e[t],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const s=this.errorCorrectionLevel.formatBits<<3|e;let t=s;for(let n=0;n<10;n++)t=t<<1^(t>>>9)*1335;const r=(s<<10|t)^21522;m(r>>>15==0);for(let n=0;n<=5;n++)this.setFunctionModule(8,n,u(r,n));this.setFunctionModule(8,7,u(r,6)),this.setFunctionModule(8,8,u(r,7)),this.setFunctionModule(7,8,u(r,8));for(let n=9;n<15;n++)this.setFunctionModule(14-n,8,u(r,n));for(let n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,u(r,n));for(let n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,u(r,n));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;const s=this.version<<12|e;m(s>>>18==0);for(let t=0;t<18;t++){const r=u(s,t),n=this.size-11+t%3,h=Math.floor(t/3);this.setFunctionModule(n,h,r),this.setFunctionModule(h,n,r)}}drawFinderPattern(e,s){for(let t=-4;t<=4;t++)for(let r=-4;r<=4;r++){const n=Math.max(Math.abs(r),Math.abs(t)),h=e+r,i=s+t;0<=h&&h<this.size&&0<=i&&i<this.size&&this.setFunctionModule(h,i,n!=2&&n!=4)}}drawAlignmentPattern(e,s){for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,s+t,Math.max(Math.abs(r),Math.abs(t))!=1)}setFunctionModule(e,s,t){this.modules[s][e]=t,this.isFunction[s][e]=!0}addEccAndInterleave(e){const s=this.version,t=this.errorCorrectionLevel;if(e.length!=w.getNumDataCodewords(s,t))throw new RangeError("Invalid argument");const r=w.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][s],n=w.ECC_CODEWORDS_PER_BLOCK[t.ordinal][s],h=Math.floor(w.getNumRawDataModules(s)/8),i=r-h%r,E=Math.floor(h/r);let l=[];const v=w.reedSolomonComputeDivisor(n);for(let g=0,R=0;g<r;g++){let x=e.slice(R,R+E-n+(g<i?0:1));R+=x.length;const z=w.reedSolomonComputeRemainder(x,v);g<i&&x.push(0),l.push(x.concat(z))}let C=[];for(let g=0;g<l[0].length;g++)l.forEach((R,x)=>{(g!=E-n||x>=i)&&C.push(R[g])});return m(C.length==h),C}drawCodewords(e){if(e.length!=Math.floor(w.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let s=0;for(let t=this.size-1;t>=1;t-=2){t==6&&(t=5);for(let r=0;r<this.size;r++)for(let n=0;n<2;n++){const h=t-n,E=(t+1&2)==0?this.size-1-r:r;!this.isFunction[E][h]&&s<e.length*8&&(this.modules[E][h]=u(e[s>>>3],7-(s&7)),s++)}}m(s==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let s=0;s<this.size;s++)for(let t=0;t<this.size;t++){let r;switch(e){case 0:r=(t+s)%2==0;break;case 1:r=s%2==0;break;case 2:r=t%3==0;break;case 3:r=(t+s)%3==0;break;case 4:r=(Math.floor(t/3)+Math.floor(s/2))%2==0;break;case 5:r=t*s%2+t*s%3==0;break;case 6:r=(t*s%2+t*s%3)%2==0;break;case 7:r=((t+s)%2+t*s%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[s][t]&&r&&(this.modules[s][t]=!this.modules[s][t])}}getPenaltyScore(){let e=0;for(let n=0;n<this.size;n++){let h=!1,i=0,E=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[n][l]==h?(i++,i==5?e+=w.PENALTY_N1:i>5&&e++):(this.finderPenaltyAddHistory(i,E),h||(e+=this.finderPenaltyCountPatterns(E)*w.PENALTY_N3),h=this.modules[n][l],i=1);e+=this.finderPenaltyTerminateAndCount(h,i,E)*w.PENALTY_N3}for(let n=0;n<this.size;n++){let h=!1,i=0,E=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[l][n]==h?(i++,i==5?e+=w.PENALTY_N1:i>5&&e++):(this.finderPenaltyAddHistory(i,E),h||(e+=this.finderPenaltyCountPatterns(E)*w.PENALTY_N3),h=this.modules[l][n],i=1);e+=this.finderPenaltyTerminateAndCount(h,i,E)*w.PENALTY_N3}for(let n=0;n<this.size-1;n++)for(let h=0;h<this.size-1;h++){const i=this.modules[n][h];i==this.modules[n][h+1]&&i==this.modules[n+1][h]&&i==this.modules[n+1][h+1]&&(e+=w.PENALTY_N2)}let s=0;for(const n of this.modules)s=n.reduce((h,i)=>h+(i?1:0),s);const t=this.size*this.size,r=Math.ceil(Math.abs(s*20-t*10)/t)-1;return m(0<=r&&r<=9),e+=r*w.PENALTY_N4,m(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,s=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let t=[6];for(let r=this.size-7;t.length<e;r-=s)t.splice(1,0,r);return t}}static getNumRawDataModules(e){if(e<w.MIN_VERSION||e>w.MAX_VERSION)throw new RangeError("Version number out of range");let s=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;s-=(25*t-10)*t-55,e>=7&&(s-=36)}return m(208<=s&&s<=29648),s}static getNumDataCodewords(e,s){return Math.floor(w.getNumRawDataModules(e)/8)-w.ECC_CODEWORDS_PER_BLOCK[s.ordinal][e]*w.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let s=[];for(let r=0;r<e-1;r++)s.push(0);s.push(1);let t=1;for(let r=0;r<e;r++){for(let n=0;n<s.length;n++)s[n]=w.reedSolomonMultiply(s[n],t),n+1<s.length&&(s[n]^=s[n+1]);t=w.reedSolomonMultiply(t,2)}return s}static reedSolomonComputeRemainder(e,s){let t=s.map(r=>0);for(const r of e){const n=r^t.shift();t.push(0),s.forEach((h,i)=>t[i]^=w.reedSolomonMultiply(h,n))}return t}static reedSolomonMultiply(e,s){if(e>>>8||s>>>8)throw new RangeError("Byte out of range");let t=0;for(let r=7;r>=0;r--)t=t<<1^(t>>>7)*285,t^=(s>>>r&1)*e;return m(t>>>8==0),t}finderPenaltyCountPatterns(e){const s=e[1];m(s<=this.size*3);const t=s>0&&e[2]==s&&e[3]==s*3&&e[4]==s&&e[5]==s;return(t&&e[0]>=s*4&&e[6]>=s?1:0)+(t&&e[6]>=s*4&&e[0]>=s?1:0)}finderPenaltyTerminateAndCount(e,s,t){return e&&(this.finderPenaltyAddHistory(s,t),s=0),s+=this.size,this.finderPenaltyAddHistory(s,t),this.finderPenaltyCountPatterns(t)}finderPenaltyAddHistory(e,s){s[0]==0&&(e+=this.size),s.pop(),s.unshift(e)}};a.MIN_VERSION=1,a.MAX_VERSION=40,a.PENALTY_N1=3,a.PENALTY_N2=3,a.PENALTY_N3=40,a.PENALTY_N4=10,a.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],a.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],c.QrCode=a;function o(p,e,s){if(e<0||e>31||p>>>e)throw new RangeError("Value out of range");for(let t=e-1;t>=0;t--)s.push(p>>>t&1)}function u(p,e){return(p>>>e&1)!=0}function m(p){if(!p)throw new Error("Assertion error")}const f=class M{constructor(e,s,t){if(this.mode=e,this.numChars=s,this.bitData=t,s<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}static makeBytes(e){let s=[];for(const t of e)o(t,8,s);return new M(M.Mode.BYTE,e.length,s)}static makeNumeric(e){if(!M.isNumeric(e))throw new RangeError("String contains non-numeric characters");let s=[];for(let t=0;t<e.length;){const r=Math.min(e.length-t,3);o(parseInt(e.substring(t,t+r),10),r*3+1,s),t+=r}return new M(M.Mode.NUMERIC,e.length,s)}static makeAlphanumeric(e){if(!M.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let s=[],t;for(t=0;t+2<=e.length;t+=2){let r=M.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t))*45;r+=M.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),o(r,11,s)}return t<e.length&&o(M.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,s),new M(M.Mode.ALPHANUMERIC,e.length,s)}static makeSegments(e){return e==""?[]:M.isNumeric(e)?[M.makeNumeric(e)]:M.isAlphanumeric(e)?[M.makeAlphanumeric(e)]:[M.makeBytes(M.toUtf8ByteArray(e))]}static makeEci(e){let s=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)o(e,8,s);else if(e<16384)o(2,2,s),o(e,14,s);else if(e<1e6)o(6,3,s),o(e,21,s);else throw new RangeError("ECI assignment value out of range");return new M(M.Mode.ECI,0,s)}static isNumeric(e){return M.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return M.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,s){let t=0;for(const r of e){const n=r.mode.numCharCountBits(s);if(r.numChars>=1<<n)return 1/0;t+=4+n+r.bitData.length}return t}static toUtf8ByteArray(e){e=encodeURI(e);let s=[];for(let t=0;t<e.length;t++)e.charAt(t)!="%"?s.push(e.charCodeAt(t)):(s.push(parseInt(e.substring(t+1,t+3),16)),t+=2);return s}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let N=f;c.QrSegment=f})(S||(S={}));(c=>{(a=>{const o=class{constructor(m,f){this.ordinal=m,this.formatBits=f}};o.LOW=new o(0,1),o.MEDIUM=new o(1,0),o.QUARTILE=new o(2,3),o.HIGH=new o(3,2),a.Ecc=o})(c.QrCode||(c.QrCode={}))})(S||(S={}));(c=>{(a=>{const o=class{constructor(m,f){this.modeBits=m,this.numBitsCharCount=f}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};o.NUMERIC=new o(1,[10,12,14]),o.ALPHANUMERIC=new o(2,[9,11,13]),o.BYTE=new o(4,[8,16,16]),o.KANJI=new o(8,[8,10,12]),o.ECI=new o(7,[0,0,0]),a.Mode=o})(c.QrSegment||(c.QrSegment={}))})(S||(S={}));var L=S;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Le={L:L.QrCode.Ecc.LOW,M:L.QrCode.Ecc.MEDIUM,Q:L.QrCode.Ecc.QUARTILE,H:L.QrCode.Ecc.HIGH},re=128,ne="L",oe="#FFFFFF",ie="#000000",ae=!1,le=1,Qe=4,Oe=0,je=.1;function ce(c,a=0){const o=[];return c.forEach(function(u,m){let f=null;u.forEach(function(N,p){if(!N&&f!==null){o.push(`M${f+a} ${m+a}h${p-f}v1H${f+a}z`),f=null;return}if(p===u.length-1){if(!N)return;f===null?o.push(`M${p+a},${m+a} h1v1H${p+a}z`):o.push(`M${f+a},${m+a} h${p+1-f}v1H${f+a}z`);return}N&&f===null&&(f=p)})}),o.join("")}function ue(c,a){return c.slice().map((o,u)=>u<a.y||u>=a.y+a.h?o:o.map((m,f)=>f<a.x||f>=a.x+a.w?m:!1))}function ze(c,a,o,u){if(u==null)return null;const m=c.length+o*2,f=Math.floor(a*je),N=m/a,p=(u.width||f)*N,e=(u.height||f)*N,s=u.x==null?c.length/2-p/2:u.x*N,t=u.y==null?c.length/2-e/2:u.y*N,r=u.opacity==null?1:u.opacity;let n=null;if(u.excavate){let i=Math.floor(s),E=Math.floor(t),l=Math.ceil(p+s-i),v=Math.ceil(e+t-E);n={x:i,y:E,w:l,h:v}}const h=u.crossOrigin;return{x:s,y:t,h:e,w:p,excavation:n,opacity:r,crossOrigin:h}}function _e(c,a){return a!=null?Math.max(Math.floor(a),0):c?Qe:Oe}function he({value:c,level:a,minVersion:o,includeMargin:u,marginSize:m,imageSettings:f,size:N,boostLevel:p}){let e=y.useMemo(()=>{const i=(Array.isArray(c)?c:[c]).reduce((E,l)=>(E.push(...L.QrSegment.makeSegments(l)),E),[]);return L.QrCode.encodeSegments(i,Le[a],o,void 0,void 0,p)},[c,a,o,p]);const{cells:s,margin:t,numCells:r,calculatedImageSettings:n}=y.useMemo(()=>{let h=e.getModules();const i=_e(u,m),E=h.length+i*2,l=ze(h,N,i,f);return{cells:h,margin:i,numCells:E,calculatedImageSettings:l}},[e,N,f,u,m]);return{qrcode:e,margin:t,cells:s,numCells:r,calculatedImageSettings:n}}var Fe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Te=y.forwardRef(function(a,o){const u=a,{value:m,size:f=re,level:N=ne,bgColor:p=oe,fgColor:e=ie,includeMargin:s=ae,minVersion:t=le,boostLevel:r,marginSize:n,imageSettings:h}=u,E=$(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:l}=E,v=$(E,["style"]),C=h==null?void 0:h.src,g=y.useRef(null),R=y.useRef(null),x=y.useCallback(P=>{g.current=P,typeof o=="function"?o(P):o&&(o.current=P)},[o]),[z,H]=y.useState(!1),{margin:Q,cells:k,numCells:D,calculatedImageSettings:A}=he({value:m,level:N,minVersion:t,boostLevel:r,includeMargin:s,marginSize:n,imageSettings:h,size:f});y.useEffect(()=>{if(g.current!=null){const P=g.current,b=P.getContext("2d");if(!b)return;let Y=k;const O=R.current,G=A!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;G&&A.excavation!=null&&(Y=ue(k,A.excavation));const q=window.devicePixelRatio||1;P.height=P.width=f*q;const W=f/D*q;b.scale(W,W),b.fillStyle=p,b.fillRect(0,0,D,D),b.fillStyle=e,Fe?b.fill(new Path2D(ce(Y,Q))):k.forEach(function(me,ge){me.forEach(function(pe,Ee){pe&&b.fillRect(Ee+Q,ge+Q,1,1)})}),A&&(b.globalAlpha=A.opacity),G&&b.drawImage(O,A.x+Q,A.y+Q,A.w,A.h)}}),y.useEffect(()=>{H(!1)},[C]);const de=B({height:f,width:f},l);let V=null;return C!=null&&(V=y.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{H(!0)},ref:R,crossOrigin:A==null?void 0:A.crossOrigin})),y.createElement(y.Fragment,null,y.createElement("canvas",B({style:de,height:f,width:f,ref:x,role:"img"},v)),V)});Te.displayName="QRCodeCanvas";var fe=y.forwardRef(function(a,o){const u=a,{value:m,size:f=re,level:N=ne,bgColor:p=oe,fgColor:e=ie,includeMargin:s=ae,minVersion:t=le,boostLevel:r,title:n,marginSize:h,imageSettings:i}=u,E=$(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:l,cells:v,numCells:C,calculatedImageSettings:g}=he({value:m,level:N,minVersion:t,boostLevel:r,includeMargin:s,marginSize:h,imageSettings:i,size:f});let R=v,x=null;i!=null&&g!=null&&(g.excavation!=null&&(R=ue(v,g.excavation)),x=y.createElement("image",{href:i.src,height:g.h,width:g.w,x:g.x+l,y:g.y+l,preserveAspectRatio:"none",opacity:g.opacity,crossOrigin:g.crossOrigin}));const z=ce(R,l);return y.createElement("svg",B({height:f,width:f,viewBox:`0 0 ${C} ${C}`,ref:o,role:"img"},E),!!n&&y.createElement("title",null,n),y.createElement("path",{fill:p,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),y.createElement("path",{fill:e,d:z,shapeRendering:"crispEdges"}),x)});fe.displayName="QRCodeSVG";const ke=({qrcode:c})=>d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"bg-white p-2 rounded-md w-fit mx-auto relative overflow-hidden",children:[!c&&d.jsx("div",{className:"absolute left-2 top-2 right-2 bottom-2 bg-white bg-opacity-50 backdrop-blur flex items-center justify-center",children:d.jsx(we,{color:"primary"})}),d.jsx(fe,{size:180,value:c})]}),d.jsx("div",{className:"mt-5 text-center",children:"请使用QQ或者TIM扫描上方二维码"})]}),F=c=>!!c&&"nickName"in c&&"faceUrl"in c,De=({qqList:c,refresh:a,isLoading:o,selectedQQ:u,onUpdateQQList:m,handleSelectionChange:f,onSubmit:N})=>d.jsxs("div",{className:"flex flex-col gap-8",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx(ee,{className:"shadow-lg",height:100,radius:"full",src:`https://q1.qlogo.cn/g?b=qq&nk=${u||"0"}&s=100`,width:100})}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ae,{classNames:{popoverContent:"bg-opacity-50 backdrop-blur"},"aria-label":"QQ Login",isDisabled:a,items:c,placeholder:"请选择QQ",renderValue:p=>p.map(e=>{var s,t,r,n;return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Z,{alt:(s=e.key)==null?void 0:s.toString(),className:"flex-shrink-0",size:"sm",src:F(e.data)?(t=e.data)==null?void 0:t.faceUrl:`https://q1.qlogo.cn/g?b=qq&nk=${e.key}&s=1`}),d.jsx("div",{className:"flex flex-col",children:F(e.data)?`${e.data.nickName}(${(r=e.key)==null?void 0:r.toString()})`:(n=e.key)==null?void 0:n.toString()})]},e.key)}),selectedKeys:[u],size:"lg",onChange:f,children:p=>d.jsx(be,{textValue:p.uin,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Z,{alt:p.uin,className:"flex-shrink-0",size:"sm",src:F(p)?p.faceUrl:`https://q1.qlogo.cn/g?b=qq&nk=${p.uin}&s=1`}),d.jsx("div",{className:"flex flex-col",children:F(p)?`${p.nickName}(${p.uin})`:p.uin})]})},p.uin)}),d.jsx(U,{isIconOnly:!0,className:"flex-grow-0 flex-shrink-0",color:"secondary",isLoading:a,radius:"full",size:"lg",variant:"light",onPress:m,children:d.jsx(Pe,{size:24})})]}),d.jsx("div",{className:"flex justify-center mt-5",children:d.jsx(U,{className:"w-64 max-w-full",color:"primary",isLoading:o,radius:"full",size:"lg",variant:"shadow",onPress:N,children:"登录"})})]});function dt(){const c=ve(),[a,o]=I.useState(""),[u,m]=I.useState(!1),[f,N]=I.useState(""),[p,e]=I.useState([]),[s,t]=I.useState(!1),r=I.useRef(!0),n=async()=>{if(!a){j.error("请选择快捷登录的QQ");return}m(!0);try{await _.setQuickLogin(a)}catch(l){const v=l.message;j.error(`快速登录QQ失败: ${v}`)}finally{setTimeout(()=>{m(!1)},1e3)}},h=async()=>{r.current&&m(!0);try{const l=await _.checkQQLoginStatusWithQrcode();r.current&&(m(!1),r.current=!1),l.isLogin?(j.success("QQ登录成功"),c("/",{replace:!0})):N(l.qrcodeurl)}catch(l){const v=l.message;j.error(`获取二维码失败: ${v}`)}},i=async()=>{t(!0);try{const l=await _.getQQQuickLoginListNew();e(l)}catch{try{const C=(await _.getQQQuickLoginList()).map(g=>({uin:g}));e(C)}catch(v){const C=v.message;j.error(`获取QQ列表失败: ${C}`)}}finally{t(!1)}},E=l=>{o(l.target.value)};return I.useEffect(()=>{const l=setInterval(()=>{h()},3e3);return h(),i(),()=>clearInterval(l)},[]),d.jsxs(d.Fragment,{children:[d.jsx("title",{children:"QQ登录 - NapCat WebUI"}),d.jsx(Re,{children:d.jsx("div",{className:"w-[608px] max-w-full py-8 px-2 md:px-8 overflow-hidden",children:d.jsxs(ye,{className:"items-center gap-4 pt-0 pb-6 bg-default-50",maxXRotation:3,maxYRotation:3,children:[d.jsxs(Ce,{className:"inline-block max-w-lg text-center justify-center",children:[d.jsxs("div",{className:"flex items-center justify-center w-full gap-2 pt-10",children:[d.jsx(ee,{alt:"logo",height:"7em",src:Ie}),d.jsxs("div",{children:[d.jsx("span",{className:K(),children:"Web "}),d.jsx("span",{className:K({color:"violet"}),children:"Login "})]})]}),d.jsx(xe,{className:"absolute right-4 top-4"})]}),d.jsxs(Me,{className:"flex gap-5 p-10 pt-0",children:[d.jsxs(Ne,{fullWidth:!0,classNames:{tabList:"shadow-sm dark:shadow-none"},isDisabled:u,size:"lg",children:[d.jsx(X,{title:"快速登录",children:d.jsx(De,{handleSelectionChange:E,isLoading:u,qqList:p,refresh:s,selectedQQ:a,onSubmit:n,onUpdateQQList:i})},"shortcut"),d.jsx(X,{title:"扫码登录",children:d.jsx(ke,{qrcode:f})},"qrcode")]}),d.jsx(U,{className:"w-fit mx-auto",variant:"light",color:"primary",onPress:()=>{c("/web_login",{replace:!0})},children:"返回 Web Login"})]})]})})})]})}export{dt as default};
